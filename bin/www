#!/usr/bin/env node

const path = require('path')
const http = require('http')

require('dotenv').config({ path: path.resolve(__dirname, '../.env') })

const port = parseInt(process.env.PORT, 10) || 8000

const app = require('../app')
app.set('port', port)

const server = http.createServer(app)
server.listen(port)

const shutDown = () => {
  app.shutDown(server)
}

process.on('SIGTERM', shutDown)
process.on('SIGINT', shutDown)
